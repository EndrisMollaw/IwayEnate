{% from "bootstrap5/form.html" import render_form %}
{% include "header.html" %}
<title>{% if form.title.data %}Edit Product{% else %}Add Product{% endif %}</title>

<main class="mb-4">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">
        <h2 class="mb-4 text-center">{% if form.title.data %}Edit Product{% else %}Add Product{% endif %}</h2>

        {{ ckeditor.load() }}
        {{ ckeditor.config(name='body') }}

        {{ render_form(form, novalidate=True, button_map={"submit": "primary"}) }}

        {% if product and product.image_path %}
          <div class="mt-3 text-center">
            <p>Current Image:</p>
            <img src="{{ url_for('static', filename=product.image_path.split('static/')[-1]) }}"
                 alt="Product Image"
                 class="img-fluid rounded"
                 style="max-height: 300px;">
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</main>

{% include "footer.html" %}
